# PA1-5 Zuma

#### 使用数据结构

分块数组

#### 算法构思

此题的算法十分简单，就是在每次插入时判断是直接插入还是有消除，如果有消除的话需要判断消除的范围，由于有可能有不同颜色珠子连续消除的场景，需要在判断时用两个循环嵌套。

此题的关键是要优化查询与删除插入的操作复杂度，由于此题的查询与删除插入是同量级的，所以如果使用分块数组，可将查询与删除插入优化为相同的复杂度 $O(\sqrt n)$ 。

然后就是具体的实现，要实现单个块过大分裂，过小（变为空块）删除，不大不小可以合并等操作。

#### 遇到的问题及debug过程

主要是分块数组实现上的细节问题，因为大多是指针，内存操作，很容易非法内存操作。

第一个bug是查找时寻址，要注意下标为边界，0时的特例。

第二个bug是删除时要分类处理，块内操作要正确移动数据，此处用memove极易出错，可能会修改到其它内存的数据，造成隐藏的bug。

第三个bug是输入可能是空串，所以输入不能直接```scanf("%s", buffer)```。

#### 参考资料

https://oi-wiki.org/ds/block-list/ 以OIWiki的代码为模板写了分块数组

#### 复杂度

时间：$O(m*n \sqrt n)$

空间：$O(n)$

